<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Select a Chat Room</title>
  <link rel="stylesheet" href="/static/css/styles.css" />
</head>
<body class="index-body">
  <h1>Join a Chat Room</h1>
  <form id="roomForm">
    <input type="text" name="room" placeholder="Enter channel name..." required />
    <button type="submit">Join</button>
  </form>

  <script>
    const token = localStorage.getItem("token");

    if (!token) {
      // No token at all â†’ not logged in
      window.location.href = "/login";
    }

    document.getElementById("roomForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const room = e.target.room.value.trim();
      if (room) {
        // Redirect to /chat with both room and token in query
        window.location.href = `/chat?room=${encodeURIComponent(room)}&token=${encodeURIComponent(token)}`;
      }
    });
  </script>
</body>
</html>
